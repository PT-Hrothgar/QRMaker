'use strict';(h=>{const r=(n,v,d)=>{const e=new Date();e.setTime(e.getTime()+d*86400000);h.cookie=n+'='+v+';'+'expires='+e.toUTCString()+';path=/';},s=c=>{const w=c+'=',x=decodeURIComponent(h.cookie).split(';');let e;for(e of x){while(e.charAt(0)===' '){e=e.substring(1);}if(e.indexOf(w)===0){return e.substring(w.length,e.length);}}return '';},N=()=>Math.floor((Math.random()*1000)+1),t=p=>h.getElementById(p),O=E=>h.getElementsByClassName(E),U=E=>encodeURIComponent(E),S=(X,Y)=>X.slice(0,Y.length)===Y,u=(a,b,c)=>{a.addEventListener(b,c);},R=(X,Y,Z)=>{let e='',c=1;for(let a in Y){if(!c){e+='&';}c=0;e+=U(a)+'='+U(Y[a]);}const H=new XMLHttpRequest();H.onload=function(){Z(this);};H.open('POST',X,true);H.setRequestHeader('Content-Type','application/x-www-form-urlencoded');H.send(e);},p=C=>{const E=t('error'),J=t('demo-img');let A=C.value;if(A===undefined){A=t('url-input').value;}if(!(S(A,'http://')||S(A,'https://'))){E.innerHTML='URL must start with http:// or https://';return;}const D={url:A};R('/set_url',D,O=>{if(O.status===400){E.innerHTML='Invalid URL';}else if(O.status===201){E.innerHTML='';const H=J.href;let I=H;while(I===H){I='img.png?x='+N();}J.src=I;t('download-link').href=I;const L=t('link-to-url');L.href=A;L.innerHTML=A;}else{E.innerHTML='An error occured.';}});};u(h,'DOMContentLoaded',()=>{const a=t('url-input');u(a,'input',p);u(a,'click',function(){this.select();});p(a);u(t('input-clear'),'click',()=>{a.value='';a.focus();});for(let A of O('accordion')){u(A,'click',function(){this.classList.toggle('active');const P=this.nextElementSibling;if(P.style.maxHeight){P.style.maxHeight=null;}else{P.style.maxHeight=P.scrollHeight+'px';}});}let X,Y;for(let E of O('accordion-before')){X=E.nextSibling,Y=h.createElement('span');Y.classList.add('accordion-spacer');X.parentNode.insertBefore(Y,X);}if(s('cws')==='y'){t('cookie-warning').remove();}else{u(t('accept-cookies'),'click',()=>{r('cws','y',365);t('cookie-warning').remove();});}});})(document);